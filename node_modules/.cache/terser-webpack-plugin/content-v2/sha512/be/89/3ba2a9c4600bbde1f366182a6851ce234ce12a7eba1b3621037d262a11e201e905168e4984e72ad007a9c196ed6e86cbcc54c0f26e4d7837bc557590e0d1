{"code":"(this[\"webpackJsonpopenlibrary-histogram\"]=this[\"webpackJsonpopenlibrary-histogram\"]||[]).push([[0],{10:function(e,t,n){},11:function(e,t,n){},18:function(e,t,n){\"use strict\";n.r(t);var r=n(1),c=n(4),i=n.n(c),a=(n(10),n(2)),s=(n(11),n(5)),o=n(0),l=function(){var e=Object(r.useState)(\"\"),t=Object(a.a)(e,2),n=t[0],c=t[1],i=Object(r.useState)([]),l=Object(a.a)(i,2),b=l[0],u=l[1],h=Object(r.useState)(!1),j=Object(a.a)(h,2),d=j[0],f=j[1],p=Object(r.useState)(null),O=Object(a.a)(p,2),m=O[0],x=O[1],g=Object(r.useState)([]),y=Object(a.a)(g,2),v=y[0],S=y[1],N=n.split(\" \").join(\"+\"),k=\"https://openlibrary.org/search.json?q=\".concat(N);if(d)return Object(o.jsx)(\"h1\",{style:{textAlign:\"center\"},children:\"Searching Library...\"});if(m)return Object(o.jsx)(\"pre\",{children:JSON.stringify(m,null,2)});if(!b)return null;var _=[];!function(e){for(var t in e){var n=e[t].publish_year;for(var r in n)_.push(n[r])}}(b);var z=_.slice().sort((function(e,t){return e-t})),C=z[0],w=z[z.length-1]-C;var A={autoSize:!0,title:{enabled:!0,text:'Results for \"'.concat(n,'\"'),color:\"black\",fontWeight:\"bold\",fontSize:20},data:b,series:[{type:\"histogram\",xKey:\"first_publish_year\",xName:\"Publicaiton Year\",binCount:w,tooltip:{enabled:!1},label:{color:\"#247\",fontSize:9,fontWeight:\"bold\"},fill:\"#247\",stroke:\"#fff\",highlightStyle:{fill:\"rgba(0, 116, 255, 0.74)\"},listeners:{nodeClick:function(e){var t=[],n=e.datum.data;for(var r in n)t.push(n[r]);S(t)}}}],legend:{enabled:!1},navigator:{enabled:!0},axes:[{type:\"number\",position:\"bottom\",title:{enabled:!0,text:\"Year of Publication\"}},{type:\"number\",position:\"left\",title:{enabled:!0,text:\"Number of Book Results\"},tick:{width:1,size:6,count:5}}]};return Object(o.jsxs)(\"div\",{className:\"body\",children:[Object(o.jsx)(\"h2\",{className:\"title\",children:\"Search Open Library\"}),Object(o.jsxs)(\"form\",{className:\"Search\",onSubmit:function(e){e.preventDefault(),f(!0),fetch(\"\".concat(k)).then((function(e){return e.json()})).then((function(e){return u(e.docs)})).then((function(){return f()})).catch(x)},children:[Object(o.jsx)(\"input\",{className:\"input-field\",type:\"search\",placeholder:\"Enter Term to Search by\",value:n,onChange:function(e){c(e.target.value)}}),Object(o.jsx)(\"button\",{className:\"button\",type:\"submit\",children:\"Find\"})]}),Object(o.jsx)(s.AgChartsReact,{options:A,className:\"chart\"}),Object(o.jsx)(\"div\",{className:\"container\",children:Object(o.jsx)(\"ul\",{children:v.map((function(e,t){return Object(o.jsxs)(\"li\",{children:[Object(o.jsxs)(\"div\",{className:\"list\",children:[Object(o.jsx)(\"img\",{alt:\"\".concat(e.title,\" book\"),src:\"http:////covers.openlibrary.org/b/olid/\".concat(e.cover_edition_key,\"-M.jpg\")}),Object(o.jsxs)(\"div\",{className:\"list-item\",children:[Object(o.jsx)(\"h3\",{children:e.title}),Object(o.jsx)(\"p\",{children:\"Author: \".concat(e.author_name)}),Object(o.jsx)(\"p\",{children:\"Year first published: \".concat(e.publish_year)})]})]}),Object(o.jsx)(\"hr\",{})]},t)}))})})]})};i.a.render(Object(o.jsx)(o.Fragment,{children:Object(o.jsx)(l,{})}),document.getElementById(\"root\"))}},[[18,1,2]]]);","name":"static/js/main.259de1e6.chunk.js","map":{"version":3,"sources":["static/js/main.259de1e6.chunk.js"],"names":["this","push","module","exports","__webpack_require__","__webpack_exports__","r","react","react_dom","react_dom_default","n","slicedToArray","main","jsx_runtime","src_App_0","_useState","Object","_useState2","searchTerm","setSearchTerm","_useState3","_useState4","books","setBooks","_useState5","_useState6","loading","setLoading","_useState7","_useState8","error","setError","_useState9","_useState10","clickList","setClickList","formatSearchTerm","split","join","API_URL","concat","style","textAlign","children","JSON","stringify","year","obj","i","_publishYear","publish_year","p","publishYear","sorted","slice","sort","a","b","smallest","yearSpan","length","options","autoSize","title","enabled","text","color","fontWeight","fontSize","data","series","type","xKey","xName","binCount","tooltip","label","fill","stroke","highlightStyle","listeners","nodeClick","event","clickBook","datum","book","legend","navigator","axes","position","tick","width","size","count","className","onSubmit","search","preventDefault","fetch","then","response","json","docs","catch","placeholder","value","onChange","e","target","map","index","alt","src","cover_edition_key","author_name","render","document","getElementById"],"mappings":"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"},"input":"(this[\"webpackJsonpopenlibrary-histogram\"] = this[\"webpackJsonpopenlibrary-histogram\"] || []).push([[0],{\n\n/***/ 10:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 11:\n/***/ (function(module, exports, __webpack_require__) {\n\n// extracted by mini-css-extract-plugin\n\n/***/ }),\n\n/***/ 18:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n// ESM COMPAT FLAG\n__webpack_require__.r(__webpack_exports__);\n\n// EXTERNAL MODULE: ./node_modules/react/index.js\nvar react = __webpack_require__(1);\n\n// EXTERNAL MODULE: ./node_modules/react-dom/index.js\nvar react_dom = __webpack_require__(4);\nvar react_dom_default = /*#__PURE__*/__webpack_require__.n(react_dom);\n\n// EXTERNAL MODULE: ./src/index.css\nvar src = __webpack_require__(10);\n\n// EXTERNAL MODULE: ./node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray.js + 5 modules\nvar slicedToArray = __webpack_require__(2);\n\n// EXTERNAL MODULE: ./src/App.css\nvar src_App = __webpack_require__(11);\n\n// EXTERNAL MODULE: ./node_modules/ag-charts-react/main.js\nvar main = __webpack_require__(5);\n\n// EXTERNAL MODULE: ./node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(0);\n\n// CONCATENATED MODULE: ./src/App.js\n// quaternion algebra\n// useState will be used to handle to slow search by returning a pair representing the current state and then a function to update the state respectively\nvar App_App=function App(){//store data from search terms using useState where searchTerm is set to empty string. The setSearchTerm is updated with the input\nvar _useState=Object(react[\"useState\"])(\"\"),_useState2=Object(slicedToArray[\"a\" /* default */])(_useState,2),searchTerm=_useState2[0],setSearchTerm=_useState2[1];//store data from API where books is set to an empty arry and setBooks method is used to update the value of books with the returned data\nvar _useState3=Object(react[\"useState\"])([]),_useState4=Object(slicedToArray[\"a\" /* default */])(_useState3,2),books=_useState4[0],setBooks=_useState4[1];//how to handle slow search reaspone while waiting for data\nvar _useState5=Object(react[\"useState\"])(false),_useState6=Object(slicedToArray[\"a\" /* default */])(_useState5,2),loading=_useState6[0],setLoading=_useState6[1];var _useState7=Object(react[\"useState\"])(null),_useState8=Object(slicedToArray[\"a\" /* default */])(_useState7,2),error=_useState8[0],setError=_useState8[1];var _useState9=Object(react[\"useState\"])([]),_useState10=Object(slicedToArray[\"a\" /* default */])(_useState9,2),clickList=_useState10[0],setClickList=_useState10[1];//format input to replace spaces with '+'\nvar formatSearchTerm=searchTerm.split(' ').join('+');var onInputChange=function onInputChange(e){setSearchTerm(e.target.value);};var API_URL=\"https://openlibrary.org/search.json?q=\".concat(formatSearchTerm);var fetchBooks=function fetchBooks(){setLoading(true);fetch(\"\".concat(API_URL)).then(function(response){return response.json();})// Books result\n.then(function(data){return setBooks(data.docs);}).then(function(){return setLoading();}).catch(setError);};if(loading){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h1\",{style:{textAlign:\"center\"},children:\"Searching Library...\"});}if(error){return/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"pre\",{children:JSON.stringify(error,null,2)});}if(!books){return null;}// Submit handler\nvar onSubmitHandler=function onSubmitHandler(search){// Prevent browser refreshing after form submission\nsearch.preventDefault();// Call fetch books async function\nfetchBooks();};var year=[];function publishYear(obj){for(var i in obj){var _publishYear=obj[i].publish_year;// console.log(publishYear);\nfor(var p in _publishYear){year.push(_publishYear[p]);}}};publishYear(books);// let frequency= {}; \n// for(var i=0; i<year.length; ++i){\n//   if(!frequency[year[i]])\n//   frequency[year[i]] = 0;\n//   ++frequency[year[i]];\n// };\n// console.log(year);\nvar sorted=year.slice().sort(function(a,b){return a-b;});var smallest=sorted[0],largest=sorted[sorted.length-1],yearSpan=largest-smallest;function nodeClick(event){var clickBook=[];var data=event.datum.data;for(var book in data){clickBook.push(data[book]);}setClickList(clickBook);}var options={autoSize:true,title:{enabled:true,text:\"Results for \\\"\".concat(searchTerm,\"\\\"\"),color:'black',fontWeight:'bold',fontSize:20},data:books,series:[{type:'histogram',xKey:'first_publish_year',xName:'Publicaiton Year',binCount:yearSpan,tooltip:{enabled:false},label:{color:'#247',fontSize:9,fontWeight:'bold'},fill:'#247',stroke:'#fff',highlightStyle:{fill:'rgba(0, 116, 255, 0.74)'},listeners:{nodeClick:nodeClick}}],legend:{enabled:false},navigator:{enabled:true},axes:[{type:'number',position:'bottom',title:{enabled:true,text:'Year of Publication'}},{type:'number',position:'left',title:{enabled:true,text:'Number of Book Results'},tick:{width:1,size:6,count:5}}]};return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"body\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h2\",{className:\"title\",children:\"Search Open Library\"}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"form\",{className:\"Search\",onSubmit:onSubmitHandler,children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"input\",{className:\"input-field\",type:\"search\",placeholder:\"Enter Term to Search by\",value:searchTerm,onChange:onInputChange}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"button\",{className:\"button\",type:\"submit\",children:\"Find\"})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(main[\"AgChartsReact\"],{options:options,className:\"chart\"}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\",{className:\"container\",children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"ul\",{children:clickList.map(function(book,index){return/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"li\",{children:[/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"list\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"img\",{alt:\"\".concat(book.title,\" book\"),src:\"http:////covers.openlibrary.org/b/olid/\".concat(book.cover_edition_key,\"-M.jpg\")}),/*#__PURE__*/Object(jsx_runtime[\"jsxs\"])(\"div\",{className:\"list-item\",children:[/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"h3\",{children:book.title}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Author: \".concat(book.author_name)}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"p\",{children:\"Year first published: \".concat(book.publish_year)})]})]}),/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"hr\",{})]},index);})})})]});};/* harmony default export */ var src_App_0 = (App_App);\n// CONCATENATED MODULE: ./src/index.js\nreact_dom_default.a.render(/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(jsx_runtime[\"Fragment\"],{children:/*#__PURE__*/Object(jsx_runtime[\"jsx\"])(src_App_0,{})}),document.getElementById('root'));\n\n/***/ })\n\n},[[18,1,2]]]);","inputSourceMap":{"version":3,"sources":["/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/postcss-loader/src/index.js??postcss!/Users/julianneagresta/Projects/openlibrary-search-histogram/src/index.css","/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/mini-css-extract-plugin/dist/loader.js??ref--5-oneOf-4-0!/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/css-loader/dist/cjs.js??ref--5-oneOf-4-1!/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/postcss-loader/src/index.js??postcss!/Users/julianneagresta/Projects/openlibrary-search-histogram/src/App.css","/Users/julianneagresta/Projects/openlibrary-search-histogram/src/App.js","/Users/julianneagresta/Projects/openlibrary-search-histogram/src/index.js"],"names":["App","useState","searchTerm","setSearchTerm","books","setBooks","loading","setLoading","error","setError","clickList","setClickList","formatSearchTerm","split","join","onInputChange","e","target","value","API_URL","fetchBooks","fetch","then","response","json","data","docs","catch","textAlign","JSON","stringify","onSubmitHandler","search","preventDefault","year","publishYear","obj","i","publish_year","p","push","sorted","slice","sort","a","b","smallest","largest","length","yearSpan","nodeClick","event","clickBook","datum","book","options","autoSize","title","enabled","text","color","fontWeight","fontSize","series","type","xKey","xName","binCount","tooltip","label","fill","stroke","highlightStyle","listeners","legend","navigator","axes","position","tick","width","size","count","map","index","cover_edition_key","author_name","ReactDOM","render","document","getElementById"],"mappings":"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","file":"x","sourcesContent":["// extracted by mini-css-extract-plugin","// extracted by mini-css-extract-plugin","// quaternion algebra\n// useState will be used to handle to slow search by returning a pair representing the current state and then a function to update the state respectively\nimport React, {useState} from 'react';\nimport './App.css';\nimport { AgChartsReact} from 'ag-charts-react';\n\n\nconst App = () => {\n  //store data from search terms using useState where searchTerm is set to empty string. The setSearchTerm is updated with the input\n  const [searchTerm, setSearchTerm] = useState(\"\");\n  //store data from API where books is set to an empty arry and setBooks method is used to update the value of books with the returned data\n  const [books, setBooks] = useState([]);\n  //how to handle slow search reaspone while waiting for data\n  const [loading, setLoading]= useState(false);\n  const [error, setError] = useState(null);\n  const [clickList, setClickList] = useState([]);\n\n  //format input to replace spaces with '+'\n  const formatSearchTerm = searchTerm.split(' ').join('+');\n  \n\n  const onInputChange= (e) => {\n    setSearchTerm(e.target.value);\n  };\n\n  let API_URL = `https://openlibrary.org/search.json?q=${formatSearchTerm}`;\n  \n  const fetchBooks = () => {\n      setLoading(true);\n      fetch(`${API_URL}`)\n      .then((response) => response.json())\n      // Books result\n      .then((data) => setBooks(data.docs))\n      .then(() => setLoading())\n      .catch(setError);\n  };\n\n  if (loading) {\n    return <h1 style={{textAlign: \"center\" }}>Searching Library...</h1>;\n  }\n  if (error) {\n    return <pre>{JSON.stringify(error, null, 2)}</pre>;\n  }\n  if (!books) {\n    return null;\n  }\n\n  \n  // Submit handler\n  const onSubmitHandler = (search) => {\n    // Prevent browser refreshing after form submission\n    search.preventDefault();\n    // Call fetch books async function\n    fetchBooks();\n  };\n\n  let year = [];\n  function publishYear(obj){ \n    for (let i in obj){\n      let publishYear = obj[i].publish_year;\n      // console.log(publishYear);\n      for(let p in publishYear){\n        year.push(publishYear[p]);\n      }\n    }\n\n  };\n\npublishYear(books);\n\n\n// let frequency= {}; \n// for(var i=0; i<year.length; ++i){\n//   if(!frequency[year[i]])\n//   frequency[year[i]] = 0;\n//   ++frequency[year[i]];\n// };\n\n// console.log(year);\n\nvar sorted = year.slice().sort(function(a, b) {\n  return a - b;\n});\n\nvar smallest = sorted[0],                                 \n    largest  = sorted[sorted.length - 1],\n    yearSpan = largest-smallest;\n\nfunction nodeClick (event) {\n  let clickBook = [];\n  var data = event.datum.data;\n  for (var book in data){\n    clickBook.push(data[book])\n  } \n  setClickList(clickBook);\n}\n  const options = {\n    autoSize: true,\n    title: {\n      enabled: true,\n      text: `Results for \"${searchTerm}\"`,\n      color: 'black', \n      fontWeight: 'bold',\n      fontSize: 20,\n    },\n    data: books,\n    series: [\n      {\n        type: 'histogram',\n        xKey: 'first_publish_year',\n        xName: 'Publicaiton Year',\n        binCount: yearSpan,\n        tooltip:{\n          enabled: false,\n        },\n        label: {\n          color: '#247',\n          fontSize:9,\n          fontWeight: 'bold',\n  \n        },\n        fill: '#247', \n        stroke: '#fff',\n        highlightStyle: {\n          fill: 'rgba(0, 116, 255, 0.74)'\n        },\n        listeners: {\n          nodeClick: nodeClick,\n        },\n      },\n    ],\n    legend: {\n      enabled: false\n    },\n    navigator: {\n      enabled: true,\n    },\n    axes: [\n      {\n        type: 'number',\n        position: 'bottom',\n        title: {\n          enabled: true,\n          text: 'Year of Publication'\n        },\n      },\n      {\n        type: 'number',\n        position: 'left',\n        title: {\n          enabled: true,\n          text: 'Number of Book Results'\n        },\n        tick: {\n          width: 1,\n          size: 6,\n          count: 5\n        },\n      },\n    ],\n  };\n\n  return (\n    <div className=\"body\">\n      <h2 className=\"title\">Search Open Library</h2>\n      <form className=\"Search\" onSubmit={onSubmitHandler}>\n            <input\n            className=\"input-field\"\n            type=\"search\"\n            placeholder=\"Enter Term to Search by\"\n            value={searchTerm}\n            onChange={onInputChange}\n            />\n            <button className=\"button\" type=\"submit\">Find</button>\n        </form>\n      <AgChartsReact options={options} className='chart' />\n      <div className = 'container'>\n        <ul >\n          {\n            clickList.map((book, index) => {\n              return (\n                <li key={index}>\n                  <div className = 'list'>\n                    <img alt={`${book.title} book`} src={`http:////covers.openlibrary.org/b/olid/${book.cover_edition_key}-M.jpg`} />\n                    <div className = 'list-item'>\n                      \n                      <h3>{book.title}</h3>\n                      <p>{`Author: ${book.author_name}`}</p>\n                      <p>{`Year first published: ${book.publish_year}`}</p>\n                    </div>\n                  </div>\n                  <hr />\n                </li>\n              );\n            })\n          }\n        </ul>\n      </div>\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <>\n    <App />\n  </>,\n  document.getElementById('root')\n);"]}}