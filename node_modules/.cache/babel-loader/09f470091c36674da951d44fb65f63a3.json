{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var _extendStatics = function extendStatics(d, b) {\n    _extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) {\n        if (b.hasOwnProperty(p)) d[p] = b[p];\n      }\n    };\n\n    return _extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    _extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __decorate = this && this.__decorate || function (decorators, target, key, desc) {\n  var c = arguments.length,\n      r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc,\n      d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);else for (var i = decorators.length - 1; i >= 0; i--) {\n    if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  }\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\n\nimport { Group } from \"../../../scene/group\";\nimport { Line } from \"../../../scene/shape/line\";\nimport { Text } from \"../../../scene/shape/text\";\nimport { Selection } from \"../../../scene/selection\";\nimport { LinearScale } from \"../../../scale/linearScale\";\nimport { Sector } from \"../../../scene/shape/sector\";\nimport { HighlightStyle, SeriesTooltip } from \"./../series\";\nimport { Label } from \"../../label\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { normalizeAngle180, toRadians } from \"../../../util/angle\";\nimport { toFixed } from \"../../../util/number\";\nimport { Caption } from \"../../../caption\";\nimport { reactive, Observable } from \"../../../util/observable\";\nimport { PolarSeries } from \"./polarSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { toTooltipHtml } from \"../../chart\";\n\nvar PieHighlightStyle = function (_super) {\n  __extends(PieHighlightStyle, _super);\n\n  function PieHighlightStyle() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  return PieHighlightStyle;\n}(HighlightStyle);\n\nvar PieNodeTag;\n\n(function (PieNodeTag) {\n  PieNodeTag[PieNodeTag[\"Sector\"] = 0] = \"Sector\";\n  PieNodeTag[PieNodeTag[\"Callout\"] = 1] = \"Callout\";\n  PieNodeTag[PieNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieNodeTag || (PieNodeTag = {}));\n\nvar PieSeriesLabel = function (_super) {\n  __extends(PieSeriesLabel, _super);\n\n  function PieSeriesLabel() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.offset = 3; // from the callout line\n\n    _this.minAngle = 20; // in degrees\n\n    return _this;\n  }\n\n  __decorate([reactive('change')], PieSeriesLabel.prototype, \"offset\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeriesLabel.prototype, \"minAngle\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeriesLabel.prototype, \"formatter\", void 0);\n\n  return PieSeriesLabel;\n}(Label);\n\nvar PieSeriesCallout = function (_super) {\n  __extends(PieSeriesCallout, _super);\n\n  function PieSeriesCallout() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.colors = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.length = 10;\n    _this.strokeWidth = 1;\n    return _this;\n  }\n\n  __decorate([reactive('change')], PieSeriesCallout.prototype, \"colors\", void 0);\n\n  __decorate([reactive('change')], PieSeriesCallout.prototype, \"length\", void 0);\n\n  __decorate([reactive('change')], PieSeriesCallout.prototype, \"strokeWidth\", void 0);\n\n  return PieSeriesCallout;\n}(Observable);\n\nvar PieSeriesTooltip = function (_super) {\n  __extends(PieSeriesTooltip, _super);\n\n  function PieSeriesTooltip() {\n    return _super !== null && _super.apply(this, arguments) || this;\n  }\n\n  __decorate([reactive('change')], PieSeriesTooltip.prototype, \"renderer\", void 0);\n\n  return PieSeriesTooltip;\n}(SeriesTooltip);\n\nexport { PieSeriesTooltip };\n\nvar PieTitle = function (_super) {\n  __extends(PieTitle, _super);\n\n  function PieTitle() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this.showInLegend = false;\n    return _this;\n  }\n\n  __decorate([reactive()], PieTitle.prototype, \"showInLegend\", void 0);\n\n  return PieTitle;\n}(Caption);\n\nexport { PieTitle };\n\nvar PieSeries = function (_super) {\n  __extends(PieSeries, _super);\n\n  function PieSeries() {\n    var _this = _super.call(this) || this;\n\n    _this.radiusScale = new LinearScale();\n    _this.groupSelection = Selection.select(_this.pickGroup).selectAll();\n    /**\n     * The processed data that gets visualized.\n     */\n\n    _this.groupSelectionData = [];\n\n    _this.angleScale = function () {\n      var scale = new LinearScale(); // Each slice is a ratio of the whole, where all ratios add up to 1.\n\n      scale.domain = [0, 1]; // Add 90 deg to start the first pie at 12 o'clock.\n\n      scale.range = [-Math.PI, Math.PI].map(function (angle) {\n        return angle + Math.PI / 2;\n      });\n      return scale;\n    }(); // When a user toggles a series item (e.g. from the legend), its boolean state is recorded here.\n\n\n    _this.seriesItemEnabled = [];\n    _this.label = new PieSeriesLabel();\n    _this.callout = new PieSeriesCallout();\n    _this.tooltip = new PieSeriesTooltip();\n    /**\n     * The key of the numeric field to use to determine the angle (for example,\n     * a pie slice angle).\n     */\n\n    _this.angleKey = '';\n    _this.angleName = '';\n    _this._fills = ['#c16068', '#a2bf8a', '#ebcc87', '#80a0c3', '#b58dae', '#85c0d1'];\n    _this._strokes = ['#874349', '#718661', '#a48f5f', '#5a7088', '#7f637a', '#5d8692'];\n    _this.fillOpacity = 1;\n    _this.strokeOpacity = 1;\n    _this.lineDash = undefined;\n    _this.lineDashOffset = 0;\n    /**\n     * The series rotation in degrees.\n     */\n\n    _this.rotation = 0;\n    _this.outerRadiusOffset = 0;\n    _this.innerRadiusOffset = 0;\n    _this.strokeWidth = 1;\n    _this.highlightStyle = new PieHighlightStyle();\n\n    _this.addEventListener('update', _this.update, _this);\n\n    _this.label.addEventListener('change', _this.scheduleLayout, _this);\n\n    _this.label.addEventListener('dataChange', _this.scheduleData, _this);\n\n    _this.callout.addEventListener('change', _this.scheduleLayout, _this);\n\n    _this.addPropertyListener('data', function (event) {\n      if (event.value) {\n        event.source.seriesItemEnabled = event.value.map(function () {\n          return true;\n        });\n      }\n    });\n\n    return _this;\n  }\n\n  Object.defineProperty(PieSeries.prototype, \"title\", {\n    get: function get() {\n      return this._title;\n    },\n    set: function set(value) {\n      var oldTitle = this._title;\n\n      function updateLegend() {\n        this.fireEvent({\n          type: 'legendChange'\n        });\n      }\n\n      if (oldTitle !== value) {\n        if (oldTitle) {\n          oldTitle.removeEventListener('change', this.update, this);\n          oldTitle.addPropertyListener('showInLegend', updateLegend, this);\n          this.group.removeChild(oldTitle.node);\n        }\n\n        if (value) {\n          value.node.textBaseline = 'bottom';\n          value.addEventListener('change', this.update, this);\n          value.addPropertyListener('showInLegend', updateLegend, this);\n          this.group.appendChild(value.node);\n        }\n\n        this._title = value;\n        this.update();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieSeries.prototype, \"fills\", {\n    get: function get() {\n      return this._fills;\n    },\n    set: function set(values) {\n      this._fills = values;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(PieSeries.prototype, \"strokes\", {\n    get: function get() {\n      return this._strokes;\n    },\n    set: function set(values) {\n      this._strokes = values;\n      this.scheduleData();\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  PieSeries.prototype.onHighlightChange = function () {\n    this.updateNodes();\n  };\n\n  PieSeries.prototype.setColors = function (fills, strokes) {\n    this.fills = fills;\n    this.strokes = strokes;\n    this.callout.colors = strokes;\n  };\n\n  PieSeries.prototype.getDomain = function (direction) {\n    if (direction === ChartAxisDirection.X) {\n      return this.angleScale.domain;\n    } else {\n      return this.radiusScale.domain;\n    }\n  };\n\n  PieSeries.prototype.processData = function () {\n    var _this = this;\n\n    var _a = this,\n        angleKey = _a.angleKey,\n        radiusKey = _a.radiusKey,\n        seriesItemEnabled = _a.seriesItemEnabled,\n        angleScale = _a.angleScale,\n        groupSelectionData = _a.groupSelectionData,\n        label = _a.label;\n\n    var data = angleKey && this.data ? this.data : [];\n    var angleData = data.map(function (datum, index) {\n      return seriesItemEnabled[index] && Math.abs(+datum[angleKey]) || 0;\n    });\n    var angleDataTotal = angleData.reduce(function (a, b) {\n      return a + b;\n    }, 0); // The ratios (in [0, 1] interval) used to calculate the end angle value for every pie slice.\n    // Each slice starts where the previous one ends, so we only keep the ratios for end angles.\n\n    var angleDataRatios = function () {\n      var sum = 0;\n      return angleData.map(function (datum) {\n        return sum += datum / angleDataTotal;\n      });\n    }();\n\n    var labelFormatter = label.formatter;\n    var labelKey = label.enabled && this.labelKey;\n    var labelData = [];\n    var radiusData = [];\n\n    if (labelKey) {\n      if (labelFormatter) {\n        labelData = data.map(function (datum) {\n          return labelFormatter({\n            value: datum[labelKey]\n          });\n        });\n      } else {\n        labelData = data.map(function (datum) {\n          return String(datum[labelKey]);\n        });\n      }\n    }\n\n    if (radiusKey) {\n      var _b = this,\n          radiusMin = _b.radiusMin,\n          radiusMax = _b.radiusMax;\n\n      var radii = data.map(function (datum) {\n        return Math.abs(datum[radiusKey]);\n      });\n      var min_1 = radiusMin !== undefined ? radiusMin : Math.min.apply(Math, radii);\n      var max = radiusMax !== undefined ? radiusMax : Math.max.apply(Math, radii);\n      var delta_1 = max - min_1;\n      radiusData = radii.map(function (value) {\n        return delta_1 ? (value - min_1) / delta_1 : 1;\n      });\n    }\n\n    groupSelectionData.length = 0;\n    var rotation = toRadians(this.rotation);\n    var halfPi = Math.PI / 2;\n    var datumIndex = 0; // Simply use reduce here to pair up adjacent ratios.\n\n    angleDataRatios.reduce(function (start, end) {\n      var radius = radiusKey ? radiusData[datumIndex] : 1;\n      var startAngle = angleScale.convert(start) + rotation;\n      var endAngle = angleScale.convert(end) + rotation;\n      var midAngle = (startAngle + endAngle) / 2;\n      var span = Math.abs(endAngle - startAngle);\n      var midCos = Math.cos(midAngle);\n      var midSin = Math.sin(midAngle);\n      var labelMinAngle = toRadians(label.minAngle);\n      var labelVisible = labelKey && span > labelMinAngle;\n      var midAngle180 = normalizeAngle180(midAngle); // Split the circle into quadrants like so: âŠ—\n\n      var quadrantStart = -3 * Math.PI / 4; // same as `normalizeAngle180(toRadians(-135))`\n\n      var textAlign;\n      var textBaseline;\n\n      if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n        textAlign = 'center';\n        textBaseline = 'bottom';\n      } else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n        textAlign = 'left';\n        textBaseline = 'middle';\n      } else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n        textAlign = 'center';\n        textBaseline = 'hanging';\n      } else {\n        textAlign = 'right';\n        textBaseline = 'middle';\n      }\n\n      groupSelectionData.push({\n        series: _this,\n        seriesDatum: data[datumIndex],\n        itemId: datumIndex,\n        index: datumIndex,\n        radius: radius,\n        startAngle: startAngle,\n        endAngle: endAngle,\n        midAngle: midAngle,\n        midCos: midCos,\n        midSin: midSin,\n        label: labelVisible ? {\n          text: labelData[datumIndex],\n          textAlign: textAlign,\n          textBaseline: textBaseline\n        } : undefined\n      });\n      datumIndex++;\n      return end;\n    }, 0);\n    return true;\n  };\n\n  PieSeries.prototype.undim = function (itemId) {\n    _super.prototype.undim.call(this, itemId);\n\n    this.highlightedItemId = itemId;\n    this.updateNodes();\n  };\n\n  PieSeries.prototype.dim = function () {\n    _super.prototype.dim.call(this);\n\n    this.highlightedItemId = undefined;\n    this.updateNodes();\n  };\n\n  PieSeries.prototype.update = function () {\n    var chart = this.chart;\n    var visible = this.group.visible = this.visible && this.seriesItemEnabled.indexOf(true) >= 0;\n\n    if (!visible || !chart || chart.dataPending || chart.layoutPending) {\n      return;\n    }\n\n    var _a = this,\n        radius = _a.radius,\n        innerRadiusOffset = _a.innerRadiusOffset,\n        outerRadiusOffset = _a.outerRadiusOffset,\n        title = _a.title;\n\n    this.radiusScale.range = [innerRadiusOffset ? radius + innerRadiusOffset : 0, radius + (outerRadiusOffset || 0)];\n    this.group.translationX = this.centerX;\n    this.group.translationY = this.centerY;\n\n    if (title) {\n      title.node.translationY = -radius - outerRadiusOffset - 2;\n      title.node.visible = title.enabled;\n    }\n\n    this.updateGroupSelection();\n    this.updateNodes();\n  };\n\n  PieSeries.prototype.updateGroupSelection = function () {\n    var updateGroups = this.groupSelection.setData(this.groupSelectionData);\n    updateGroups.exit.remove();\n    var enterGroups = updateGroups.enter.append(Group);\n    enterGroups.append(Sector).each(function (node) {\n      return node.tag = PieNodeTag.Sector;\n    });\n    enterGroups.append(Line).each(function (node) {\n      node.tag = PieNodeTag.Callout;\n      node.pointerEvents = PointerEvents.None;\n    });\n    enterGroups.append(Text).each(function (node) {\n      node.tag = PieNodeTag.Label;\n      node.pointerEvents = PointerEvents.None;\n    });\n    this.groupSelection = updateGroups.merge(enterGroups);\n  };\n\n  PieSeries.prototype.updateNodes = function () {\n    var _this = this;\n\n    if (!this.chart) {\n      return;\n    }\n\n    var _a = this,\n        fills = _a.fills,\n        strokes = _a.strokes,\n        fillOpacity = _a.fillOpacity,\n        strokeOpacity = _a.strokeOpacity,\n        radiusScale = _a.radiusScale,\n        callout = _a.callout,\n        shadow = _a.shadow,\n        _b = _a.highlightStyle,\n        fill = _b.fill,\n        stroke = _b.stroke,\n        centerOffset = _b.centerOffset,\n        highlightedDatumStrokeWidth = _b.strokeWidth,\n        _c = _b.series,\n        seriesHighlightingEnabled = _c.enabled,\n        highlightedSeriesStrokeWidth = _c.strokeWidth,\n        angleKey = _a.angleKey,\n        radiusKey = _a.radiusKey,\n        formatter = _a.formatter;\n\n    var highlightedDatum = this.chart.highlightedDatum;\n    var centerOffsets = [];\n    var innerRadius = radiusScale.convert(0);\n    this.groupSelection.selectByTag(PieNodeTag.Sector).each(function (sector, datum, index) {\n      var radius = radiusScale.convert(datum.radius);\n      var isDatumHighlighted = datum === highlightedDatum || datum.itemId === _this.highlightedItemId;\n      var isSeriesHighlighted = _this.highlightedItemId !== undefined;\n      var highlighted = datum === highlightedDatum || datum.itemId === _this.highlightedItemId;\n      var strokeWidth = isDatumHighlighted && highlightedDatumStrokeWidth !== undefined ? highlightedDatumStrokeWidth : isSeriesHighlighted && highlightedSeriesStrokeWidth !== undefined ? highlightedSeriesStrokeWidth : _this.strokeWidth;\n      var sectorFill = highlighted && fill !== undefined ? fill : fills[index % fills.length];\n      var sectorStroke = highlighted && stroke !== undefined ? stroke : strokes[index % strokes.length];\n      var format = undefined;\n\n      if (formatter) {\n        format = formatter({\n          datum: datum.seriesDatum,\n          fill: sectorFill,\n          stroke: sectorStroke,\n          strokeWidth: strokeWidth,\n          highlighted: highlighted,\n          angleKey: angleKey,\n          radiusKey: radiusKey\n        });\n      } // Bring highlighted slice's parent group to front.\n\n\n      var parent = sector.parent && sector.parent.parent;\n\n      if (highlighted && parent) {\n        parent.removeChild(sector.parent);\n        parent.appendChild(sector.parent);\n      }\n\n      sector.innerRadius = innerRadius;\n      sector.outerRadius = radius;\n      sector.startAngle = datum.startAngle;\n      sector.endAngle = datum.endAngle;\n      sector.fill = format && format.fill || sectorFill;\n      sector.stroke = format && format.stroke || sectorStroke;\n      sector.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : strokeWidth;\n      sector.fillOpacity = fillOpacity;\n      sector.strokeOpacity = strokeOpacity;\n      sector.lineDash = _this.lineDash;\n      sector.lineDashOffset = _this.lineDashOffset;\n      sector.centerOffset = highlighted && centerOffset !== undefined ? centerOffset : 0;\n      sector.fillShadow = shadow;\n      sector.lineJoin = 'round';\n      centerOffsets.push(sector.centerOffset);\n    });\n    var calloutColors = callout.colors,\n        calloutLength = callout.length,\n        calloutStrokeWidth = callout.strokeWidth;\n    this.groupSelection.selectByTag(PieNodeTag.Callout).each(function (line, datum, index) {\n      if (datum.label) {\n        var radius = radiusScale.convert(datum.radius);\n        line.strokeWidth = calloutStrokeWidth;\n        line.stroke = calloutColors[index % calloutColors.length];\n        line.x1 = datum.midCos * radius;\n        line.y1 = datum.midSin * radius;\n        line.x2 = datum.midCos * (radius + calloutLength);\n        line.y2 = datum.midSin * (radius + calloutLength);\n      } else {\n        line.stroke = undefined;\n      }\n    });\n    {\n      var _d = this.label,\n          offset_1 = _d.offset,\n          fontStyle_1 = _d.fontStyle,\n          fontWeight_1 = _d.fontWeight,\n          fontSize_1 = _d.fontSize,\n          fontFamily_1 = _d.fontFamily,\n          color_1 = _d.color;\n      this.groupSelection.selectByTag(PieNodeTag.Label).each(function (text, datum, index) {\n        var label = datum.label;\n\n        if (label) {\n          var radius = radiusScale.convert(datum.radius);\n          var labelRadius = centerOffsets[index] + radius + calloutLength + offset_1;\n          text.fontStyle = fontStyle_1;\n          text.fontWeight = fontWeight_1;\n          text.fontSize = fontSize_1;\n          text.fontFamily = fontFamily_1;\n          text.text = label.text;\n          text.x = datum.midCos * labelRadius;\n          text.y = datum.midSin * labelRadius;\n          text.fill = color_1;\n          text.textAlign = label.textAlign;\n          text.textBaseline = label.textBaseline;\n        } else {\n          text.fill = undefined;\n        }\n      });\n    }\n  };\n\n  PieSeries.prototype.fireNodeClickEvent = function (event, datum) {\n    this.fireEvent({\n      type: 'nodeClick',\n      event: event,\n      series: this,\n      datum: datum.seriesDatum,\n      angleKey: this.angleKey,\n      labelKey: this.labelKey,\n      radiusKey: this.radiusKey\n    });\n  };\n\n  PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n    var angleKey = this.angleKey;\n\n    if (!angleKey) {\n      return '';\n    }\n\n    var _a = this,\n        fills = _a.fills,\n        tooltip = _a.tooltip,\n        angleName = _a.angleName,\n        radiusKey = _a.radiusKey,\n        radiusName = _a.radiusName,\n        labelKey = _a.labelKey,\n        labelName = _a.labelName;\n\n    var tooltipRenderer = tooltip.renderer;\n    var color = fills[nodeDatum.index % fills.length];\n    var datum = nodeDatum.seriesDatum;\n    var label = labelKey ? datum[labelKey] + \": \" : '';\n    var angleValue = datum[angleKey];\n    var formattedAngleValue = typeof angleValue === 'number' ? toFixed(angleValue) : angleValue.toString();\n    var title = this.title ? this.title.text : undefined;\n    var content = label + formattedAngleValue;\n    var defaults = {\n      title: title,\n      backgroundColor: color,\n      content: content\n    };\n\n    if (tooltipRenderer) {\n      return toTooltipHtml(tooltipRenderer({\n        datum: datum,\n        angleKey: angleKey,\n        angleValue: angleValue,\n        angleName: angleName,\n        radiusKey: radiusKey,\n        radiusValue: radiusKey ? datum[radiusKey] : undefined,\n        radiusName: radiusName,\n        labelKey: labelKey,\n        labelName: labelName,\n        title: title,\n        color: color\n      }), defaults);\n    }\n\n    return toTooltipHtml(defaults);\n  };\n\n  PieSeries.prototype.listSeriesItems = function (legendData) {\n    var _this = this;\n\n    var _a = this,\n        labelKey = _a.labelKey,\n        data = _a.data;\n\n    if (data && data.length && labelKey) {\n      var _b = this,\n          fills_1 = _b.fills,\n          strokes_1 = _b.strokes,\n          id_1 = _b.id;\n\n      var titleText_1 = this.title && this.title.showInLegend && this.title.text;\n      data.forEach(function (datum, index) {\n        var labelParts = [];\n        titleText_1 && labelParts.push(titleText_1);\n        labelParts.push(String(datum[labelKey]));\n        legendData.push({\n          id: id_1,\n          itemId: index,\n          enabled: _this.seriesItemEnabled[index],\n          label: {\n            text: labelParts.join(' - ')\n          },\n          marker: {\n            fill: fills_1[index % fills_1.length],\n            stroke: strokes_1[index % strokes_1.length],\n            fillOpacity: _this.fillOpacity,\n            strokeOpacity: _this.strokeOpacity\n          }\n        });\n      });\n    }\n  };\n\n  PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n    this.seriesItemEnabled[itemId] = enabled;\n    this.scheduleData();\n  };\n\n  PieSeries.className = 'PieSeries';\n  PieSeries.type = 'pie';\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"angleKey\", void 0);\n\n  __decorate([reactive('update')], PieSeries.prototype, \"angleName\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"radiusKey\", void 0);\n\n  __decorate([reactive('update')], PieSeries.prototype, \"radiusName\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"radiusMin\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"radiusMax\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"labelKey\", void 0);\n\n  __decorate([reactive('update')], PieSeries.prototype, \"labelName\", void 0);\n\n  __decorate([reactive('layoutChange')], PieSeries.prototype, \"fillOpacity\", void 0);\n\n  __decorate([reactive('layoutChange')], PieSeries.prototype, \"strokeOpacity\", void 0);\n\n  __decorate([reactive('update')], PieSeries.prototype, \"lineDash\", void 0);\n\n  __decorate([reactive('update')], PieSeries.prototype, \"lineDashOffset\", void 0);\n\n  __decorate([reactive('update')], PieSeries.prototype, \"formatter\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"rotation\", void 0);\n\n  __decorate([reactive('layoutChange')], PieSeries.prototype, \"outerRadiusOffset\", void 0);\n\n  __decorate([reactive('dataChange')], PieSeries.prototype, \"innerRadiusOffset\", void 0);\n\n  __decorate([reactive('layoutChange')], PieSeries.prototype, \"strokeWidth\", void 0);\n\n  __decorate([reactive('layoutChange')], PieSeries.prototype, \"shadow\", void 0);\n\n  return PieSeries;\n}(PolarSeries);\n\nexport { PieSeries };","map":{"version":3,"sources":["/Users/julianneagresta/Projects/openlibrary-search-histogram/node_modules/ag-charts-community/dist/es6/chart/series/polar/pieSeries.js"],"names":["__extends","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__","constructor","prototype","create","__decorate","decorators","target","key","desc","c","arguments","length","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Group","Line","Text","Selection","LinearScale","Sector","HighlightStyle","SeriesTooltip","Label","PointerEvents","normalizeAngle180","toRadians","toFixed","Caption","reactive","Observable","PolarSeries","ChartAxisDirection","toTooltipHtml","PieHighlightStyle","_super","apply","PieNodeTag","PieSeriesLabel","_this","offset","minAngle","PieSeriesCallout","colors","strokeWidth","PieSeriesTooltip","PieTitle","showInLegend","PieSeries","call","radiusScale","groupSelection","select","pickGroup","selectAll","groupSelectionData","angleScale","scale","domain","range","Math","PI","map","angle","seriesItemEnabled","label","callout","tooltip","angleKey","angleName","_fills","_strokes","fillOpacity","strokeOpacity","lineDash","undefined","lineDashOffset","rotation","outerRadiusOffset","innerRadiusOffset","highlightStyle","addEventListener","update","scheduleLayout","scheduleData","addPropertyListener","event","value","source","get","_title","set","oldTitle","updateLegend","fireEvent","type","removeEventListener","group","removeChild","node","textBaseline","appendChild","enumerable","configurable","values","onHighlightChange","updateNodes","setColors","fills","strokes","getDomain","direction","X","processData","_a","radiusKey","data","angleData","datum","index","abs","angleDataTotal","reduce","a","angleDataRatios","sum","labelFormatter","formatter","labelKey","enabled","labelData","radiusData","String","_b","radiusMin","radiusMax","radii","min_1","min","max","delta_1","halfPi","datumIndex","start","end","radius","startAngle","convert","endAngle","midAngle","span","midCos","cos","midSin","sin","labelMinAngle","labelVisible","midAngle180","quadrantStart","textAlign","push","series","seriesDatum","itemId","text","undim","highlightedItemId","dim","chart","visible","indexOf","dataPending","layoutPending","title","translationX","centerX","translationY","centerY","updateGroupSelection","updateGroups","setData","exit","remove","enterGroups","enter","append","each","tag","Callout","pointerEvents","None","merge","shadow","fill","stroke","centerOffset","highlightedDatumStrokeWidth","_c","seriesHighlightingEnabled","highlightedSeriesStrokeWidth","highlightedDatum","centerOffsets","innerRadius","selectByTag","sector","isDatumHighlighted","isSeriesHighlighted","highlighted","sectorFill","sectorStroke","format","parent","outerRadius","fillShadow","lineJoin","calloutColors","calloutLength","calloutStrokeWidth","line","x1","y1","x2","y2","_d","offset_1","fontStyle_1","fontStyle","fontWeight_1","fontWeight","fontSize_1","fontSize","fontFamily_1","fontFamily","color_1","color","labelRadius","x","y","fireNodeClickEvent","getTooltipHtml","nodeDatum","radiusName","labelName","tooltipRenderer","renderer","angleValue","formattedAngleValue","toString","content","defaults","backgroundColor","radiusValue","listSeriesItems","legendData","fills_1","strokes_1","id_1","id","titleText_1","forEach","labelParts","join","marker","toggleSeriesItem","className"],"mappings":"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","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { Group } from \"../../../scene/group\";\nimport { Line } from \"../../../scene/shape/line\";\nimport { Text } from \"../../../scene/shape/text\";\nimport { Selection } from \"../../../scene/selection\";\nimport { LinearScale } from \"../../../scale/linearScale\";\nimport { Sector } from \"../../../scene/shape/sector\";\nimport { HighlightStyle, SeriesTooltip } from \"./../series\";\nimport { Label } from \"../../label\";\nimport { PointerEvents } from \"../../../scene/node\";\nimport { normalizeAngle180, toRadians } from \"../../../util/angle\";\nimport { toFixed } from \"../../../util/number\";\nimport { Caption } from \"../../../caption\";\nimport { reactive, Observable } from \"../../../util/observable\";\nimport { PolarSeries } from \"./polarSeries\";\nimport { ChartAxisDirection } from \"../../chartAxis\";\nimport { toTooltipHtml } from \"../../chart\";\nvar PieHighlightStyle = /** @class */ (function (_super) {\n    __extends(PieHighlightStyle, _super);\n    function PieHighlightStyle() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PieHighlightStyle;\n}(HighlightStyle));\nvar PieNodeTag;\n(function (PieNodeTag) {\n    PieNodeTag[PieNodeTag[\"Sector\"] = 0] = \"Sector\";\n    PieNodeTag[PieNodeTag[\"Callout\"] = 1] = \"Callout\";\n    PieNodeTag[PieNodeTag[\"Label\"] = 2] = \"Label\";\n})(PieNodeTag || (PieNodeTag = {}));\nvar PieSeriesLabel = /** @class */ (function (_super) {\n    __extends(PieSeriesLabel, _super);\n    function PieSeriesLabel() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.offset = 3; // from the callout line\n        _this.minAngle = 20; // in degrees\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], PieSeriesLabel.prototype, \"offset\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeriesLabel.prototype, \"minAngle\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeriesLabel.prototype, \"formatter\", void 0);\n    return PieSeriesLabel;\n}(Label));\nvar PieSeriesCallout = /** @class */ (function (_super) {\n    __extends(PieSeriesCallout, _super);\n    function PieSeriesCallout() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.colors = [\n            '#874349',\n            '#718661',\n            '#a48f5f',\n            '#5a7088',\n            '#7f637a',\n            '#5d8692'\n        ];\n        _this.length = 10;\n        _this.strokeWidth = 1;\n        return _this;\n    }\n    __decorate([\n        reactive('change')\n    ], PieSeriesCallout.prototype, \"colors\", void 0);\n    __decorate([\n        reactive('change')\n    ], PieSeriesCallout.prototype, \"length\", void 0);\n    __decorate([\n        reactive('change')\n    ], PieSeriesCallout.prototype, \"strokeWidth\", void 0);\n    return PieSeriesCallout;\n}(Observable));\nvar PieSeriesTooltip = /** @class */ (function (_super) {\n    __extends(PieSeriesTooltip, _super);\n    function PieSeriesTooltip() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    __decorate([\n        reactive('change')\n    ], PieSeriesTooltip.prototype, \"renderer\", void 0);\n    return PieSeriesTooltip;\n}(SeriesTooltip));\nexport { PieSeriesTooltip };\nvar PieTitle = /** @class */ (function (_super) {\n    __extends(PieTitle, _super);\n    function PieTitle() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.showInLegend = false;\n        return _this;\n    }\n    __decorate([\n        reactive()\n    ], PieTitle.prototype, \"showInLegend\", void 0);\n    return PieTitle;\n}(Caption));\nexport { PieTitle };\nvar PieSeries = /** @class */ (function (_super) {\n    __extends(PieSeries, _super);\n    function PieSeries() {\n        var _this = _super.call(this) || this;\n        _this.radiusScale = new LinearScale();\n        _this.groupSelection = Selection.select(_this.pickGroup).selectAll();\n        /**\n         * The processed data that gets visualized.\n         */\n        _this.groupSelectionData = [];\n        _this.angleScale = (function () {\n            var scale = new LinearScale();\n            // Each slice is a ratio of the whole, where all ratios add up to 1.\n            scale.domain = [0, 1];\n            // Add 90 deg to start the first pie at 12 o'clock.\n            scale.range = [-Math.PI, Math.PI].map(function (angle) { return angle + Math.PI / 2; });\n            return scale;\n        })();\n        // When a user toggles a series item (e.g. from the legend), its boolean state is recorded here.\n        _this.seriesItemEnabled = [];\n        _this.label = new PieSeriesLabel();\n        _this.callout = new PieSeriesCallout();\n        _this.tooltip = new PieSeriesTooltip();\n        /**\n         * The key of the numeric field to use to determine the angle (for example,\n         * a pie slice angle).\n         */\n        _this.angleKey = '';\n        _this.angleName = '';\n        _this._fills = [\n            '#c16068',\n            '#a2bf8a',\n            '#ebcc87',\n            '#80a0c3',\n            '#b58dae',\n            '#85c0d1'\n        ];\n        _this._strokes = [\n            '#874349',\n            '#718661',\n            '#a48f5f',\n            '#5a7088',\n            '#7f637a',\n            '#5d8692'\n        ];\n        _this.fillOpacity = 1;\n        _this.strokeOpacity = 1;\n        _this.lineDash = undefined;\n        _this.lineDashOffset = 0;\n        /**\n         * The series rotation in degrees.\n         */\n        _this.rotation = 0;\n        _this.outerRadiusOffset = 0;\n        _this.innerRadiusOffset = 0;\n        _this.strokeWidth = 1;\n        _this.highlightStyle = new PieHighlightStyle();\n        _this.addEventListener('update', _this.update, _this);\n        _this.label.addEventListener('change', _this.scheduleLayout, _this);\n        _this.label.addEventListener('dataChange', _this.scheduleData, _this);\n        _this.callout.addEventListener('change', _this.scheduleLayout, _this);\n        _this.addPropertyListener('data', function (event) {\n            if (event.value) {\n                event.source.seriesItemEnabled = event.value.map(function () { return true; });\n            }\n        });\n        return _this;\n    }\n    Object.defineProperty(PieSeries.prototype, \"title\", {\n        get: function () {\n            return this._title;\n        },\n        set: function (value) {\n            var oldTitle = this._title;\n            function updateLegend() {\n                this.fireEvent({ type: 'legendChange' });\n            }\n            if (oldTitle !== value) {\n                if (oldTitle) {\n                    oldTitle.removeEventListener('change', this.update, this);\n                    oldTitle.addPropertyListener('showInLegend', updateLegend, this);\n                    this.group.removeChild(oldTitle.node);\n                }\n                if (value) {\n                    value.node.textBaseline = 'bottom';\n                    value.addEventListener('change', this.update, this);\n                    value.addPropertyListener('showInLegend', updateLegend, this);\n                    this.group.appendChild(value.node);\n                }\n                this._title = value;\n                this.update();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"fills\", {\n        get: function () {\n            return this._fills;\n        },\n        set: function (values) {\n            this._fills = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(PieSeries.prototype, \"strokes\", {\n        get: function () {\n            return this._strokes;\n        },\n        set: function (values) {\n            this._strokes = values;\n            this.scheduleData();\n        },\n        enumerable: true,\n        configurable: true\n    });\n    PieSeries.prototype.onHighlightChange = function () {\n        this.updateNodes();\n    };\n    PieSeries.prototype.setColors = function (fills, strokes) {\n        this.fills = fills;\n        this.strokes = strokes;\n        this.callout.colors = strokes;\n    };\n    PieSeries.prototype.getDomain = function (direction) {\n        if (direction === ChartAxisDirection.X) {\n            return this.angleScale.domain;\n        }\n        else {\n            return this.radiusScale.domain;\n        }\n    };\n    PieSeries.prototype.processData = function () {\n        var _this = this;\n        var _a = this, angleKey = _a.angleKey, radiusKey = _a.radiusKey, seriesItemEnabled = _a.seriesItemEnabled, angleScale = _a.angleScale, groupSelectionData = _a.groupSelectionData, label = _a.label;\n        var data = angleKey && this.data ? this.data : [];\n        var angleData = data.map(function (datum, index) { return seriesItemEnabled[index] && Math.abs(+datum[angleKey]) || 0; });\n        var angleDataTotal = angleData.reduce(function (a, b) { return a + b; }, 0);\n        // The ratios (in [0, 1] interval) used to calculate the end angle value for every pie slice.\n        // Each slice starts where the previous one ends, so we only keep the ratios for end angles.\n        var angleDataRatios = (function () {\n            var sum = 0;\n            return angleData.map(function (datum) { return sum += datum / angleDataTotal; });\n        })();\n        var labelFormatter = label.formatter;\n        var labelKey = label.enabled && this.labelKey;\n        var labelData = [];\n        var radiusData = [];\n        if (labelKey) {\n            if (labelFormatter) {\n                labelData = data.map(function (datum) { return labelFormatter({ value: datum[labelKey] }); });\n            }\n            else {\n                labelData = data.map(function (datum) { return String(datum[labelKey]); });\n            }\n        }\n        if (radiusKey) {\n            var _b = this, radiusMin = _b.radiusMin, radiusMax = _b.radiusMax;\n            var radii = data.map(function (datum) { return Math.abs(datum[radiusKey]); });\n            var min_1 = radiusMin !== undefined ? radiusMin : Math.min.apply(Math, radii);\n            var max = radiusMax !== undefined ? radiusMax : Math.max.apply(Math, radii);\n            var delta_1 = max - min_1;\n            radiusData = radii.map(function (value) { return delta_1 ? (value - min_1) / delta_1 : 1; });\n        }\n        groupSelectionData.length = 0;\n        var rotation = toRadians(this.rotation);\n        var halfPi = Math.PI / 2;\n        var datumIndex = 0;\n        // Simply use reduce here to pair up adjacent ratios.\n        angleDataRatios.reduce(function (start, end) {\n            var radius = radiusKey ? radiusData[datumIndex] : 1;\n            var startAngle = angleScale.convert(start) + rotation;\n            var endAngle = angleScale.convert(end) + rotation;\n            var midAngle = (startAngle + endAngle) / 2;\n            var span = Math.abs(endAngle - startAngle);\n            var midCos = Math.cos(midAngle);\n            var midSin = Math.sin(midAngle);\n            var labelMinAngle = toRadians(label.minAngle);\n            var labelVisible = labelKey && span > labelMinAngle;\n            var midAngle180 = normalizeAngle180(midAngle);\n            // Split the circle into quadrants like so: âŠ—\n            var quadrantStart = -3 * Math.PI / 4; // same as `normalizeAngle180(toRadians(-135))`\n            var textAlign;\n            var textBaseline;\n            if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'center';\n                textBaseline = 'bottom';\n            }\n            else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'left';\n                textBaseline = 'middle';\n            }\n            else if (midAngle180 >= quadrantStart && midAngle180 < (quadrantStart += halfPi)) {\n                textAlign = 'center';\n                textBaseline = 'hanging';\n            }\n            else {\n                textAlign = 'right';\n                textBaseline = 'middle';\n            }\n            groupSelectionData.push({\n                series: _this,\n                seriesDatum: data[datumIndex],\n                itemId: datumIndex,\n                index: datumIndex,\n                radius: radius,\n                startAngle: startAngle,\n                endAngle: endAngle,\n                midAngle: midAngle,\n                midCos: midCos,\n                midSin: midSin,\n                label: labelVisible ? {\n                    text: labelData[datumIndex],\n                    textAlign: textAlign,\n                    textBaseline: textBaseline\n                } : undefined\n            });\n            datumIndex++;\n            return end;\n        }, 0);\n        return true;\n    };\n    PieSeries.prototype.undim = function (itemId) {\n        _super.prototype.undim.call(this, itemId);\n        this.highlightedItemId = itemId;\n        this.updateNodes();\n    };\n    PieSeries.prototype.dim = function () {\n        _super.prototype.dim.call(this);\n        this.highlightedItemId = undefined;\n        this.updateNodes();\n    };\n    PieSeries.prototype.update = function () {\n        var chart = this.chart;\n        var visible = this.group.visible = this.visible && this.seriesItemEnabled.indexOf(true) >= 0;\n        if (!visible || !chart || chart.dataPending || chart.layoutPending) {\n            return;\n        }\n        var _a = this, radius = _a.radius, innerRadiusOffset = _a.innerRadiusOffset, outerRadiusOffset = _a.outerRadiusOffset, title = _a.title;\n        this.radiusScale.range = [\n            innerRadiusOffset ? radius + innerRadiusOffset : 0,\n            radius + (outerRadiusOffset || 0)\n        ];\n        this.group.translationX = this.centerX;\n        this.group.translationY = this.centerY;\n        if (title) {\n            title.node.translationY = -radius - outerRadiusOffset - 2;\n            title.node.visible = title.enabled;\n        }\n        this.updateGroupSelection();\n        this.updateNodes();\n    };\n    PieSeries.prototype.updateGroupSelection = function () {\n        var updateGroups = this.groupSelection.setData(this.groupSelectionData);\n        updateGroups.exit.remove();\n        var enterGroups = updateGroups.enter.append(Group);\n        enterGroups.append(Sector).each(function (node) { return node.tag = PieNodeTag.Sector; });\n        enterGroups.append(Line).each(function (node) {\n            node.tag = PieNodeTag.Callout;\n            node.pointerEvents = PointerEvents.None;\n        });\n        enterGroups.append(Text).each(function (node) {\n            node.tag = PieNodeTag.Label;\n            node.pointerEvents = PointerEvents.None;\n        });\n        this.groupSelection = updateGroups.merge(enterGroups);\n    };\n    PieSeries.prototype.updateNodes = function () {\n        var _this = this;\n        if (!this.chart) {\n            return;\n        }\n        var _a = this, fills = _a.fills, strokes = _a.strokes, fillOpacity = _a.fillOpacity, strokeOpacity = _a.strokeOpacity, radiusScale = _a.radiusScale, callout = _a.callout, shadow = _a.shadow, _b = _a.highlightStyle, fill = _b.fill, stroke = _b.stroke, centerOffset = _b.centerOffset, highlightedDatumStrokeWidth = _b.strokeWidth, _c = _b.series, seriesHighlightingEnabled = _c.enabled, highlightedSeriesStrokeWidth = _c.strokeWidth, angleKey = _a.angleKey, radiusKey = _a.radiusKey, formatter = _a.formatter;\n        var highlightedDatum = this.chart.highlightedDatum;\n        var centerOffsets = [];\n        var innerRadius = radiusScale.convert(0);\n        this.groupSelection.selectByTag(PieNodeTag.Sector).each(function (sector, datum, index) {\n            var radius = radiusScale.convert(datum.radius);\n            var isDatumHighlighted = datum === highlightedDatum || datum.itemId === _this.highlightedItemId;\n            var isSeriesHighlighted = _this.highlightedItemId !== undefined;\n            var highlighted = datum === highlightedDatum || datum.itemId === _this.highlightedItemId;\n            var strokeWidth = isDatumHighlighted && highlightedDatumStrokeWidth !== undefined\n                ? highlightedDatumStrokeWidth\n                : isSeriesHighlighted && highlightedSeriesStrokeWidth !== undefined\n                    ? highlightedSeriesStrokeWidth\n                    : _this.strokeWidth;\n            var sectorFill = highlighted && fill !== undefined ? fill : fills[index % fills.length];\n            var sectorStroke = highlighted && stroke !== undefined ? stroke : strokes[index % strokes.length];\n            var format = undefined;\n            if (formatter) {\n                format = formatter({\n                    datum: datum.seriesDatum,\n                    fill: sectorFill,\n                    stroke: sectorStroke,\n                    strokeWidth: strokeWidth,\n                    highlighted: highlighted,\n                    angleKey: angleKey,\n                    radiusKey: radiusKey\n                });\n            }\n            // Bring highlighted slice's parent group to front.\n            var parent = sector.parent && sector.parent.parent;\n            if (highlighted && parent) {\n                parent.removeChild(sector.parent);\n                parent.appendChild(sector.parent);\n            }\n            sector.innerRadius = innerRadius;\n            sector.outerRadius = radius;\n            sector.startAngle = datum.startAngle;\n            sector.endAngle = datum.endAngle;\n            sector.fill = format && format.fill || sectorFill;\n            sector.stroke = format && format.stroke || sectorStroke;\n            sector.strokeWidth = format && format.strokeWidth !== undefined ? format.strokeWidth : strokeWidth;\n            sector.fillOpacity = fillOpacity;\n            sector.strokeOpacity = strokeOpacity;\n            sector.lineDash = _this.lineDash;\n            sector.lineDashOffset = _this.lineDashOffset;\n            sector.centerOffset = highlighted && centerOffset !== undefined ? centerOffset : 0;\n            sector.fillShadow = shadow;\n            sector.lineJoin = 'round';\n            centerOffsets.push(sector.centerOffset);\n        });\n        var calloutColors = callout.colors, calloutLength = callout.length, calloutStrokeWidth = callout.strokeWidth;\n        this.groupSelection.selectByTag(PieNodeTag.Callout).each(function (line, datum, index) {\n            if (datum.label) {\n                var radius = radiusScale.convert(datum.radius);\n                line.strokeWidth = calloutStrokeWidth;\n                line.stroke = calloutColors[index % calloutColors.length];\n                line.x1 = datum.midCos * radius;\n                line.y1 = datum.midSin * radius;\n                line.x2 = datum.midCos * (radius + calloutLength);\n                line.y2 = datum.midSin * (radius + calloutLength);\n            }\n            else {\n                line.stroke = undefined;\n            }\n        });\n        {\n            var _d = this.label, offset_1 = _d.offset, fontStyle_1 = _d.fontStyle, fontWeight_1 = _d.fontWeight, fontSize_1 = _d.fontSize, fontFamily_1 = _d.fontFamily, color_1 = _d.color;\n            this.groupSelection.selectByTag(PieNodeTag.Label).each(function (text, datum, index) {\n                var label = datum.label;\n                if (label) {\n                    var radius = radiusScale.convert(datum.radius);\n                    var labelRadius = centerOffsets[index] + radius + calloutLength + offset_1;\n                    text.fontStyle = fontStyle_1;\n                    text.fontWeight = fontWeight_1;\n                    text.fontSize = fontSize_1;\n                    text.fontFamily = fontFamily_1;\n                    text.text = label.text;\n                    text.x = datum.midCos * labelRadius;\n                    text.y = datum.midSin * labelRadius;\n                    text.fill = color_1;\n                    text.textAlign = label.textAlign;\n                    text.textBaseline = label.textBaseline;\n                }\n                else {\n                    text.fill = undefined;\n                }\n            });\n        }\n    };\n    PieSeries.prototype.fireNodeClickEvent = function (event, datum) {\n        this.fireEvent({\n            type: 'nodeClick',\n            event: event,\n            series: this,\n            datum: datum.seriesDatum,\n            angleKey: this.angleKey,\n            labelKey: this.labelKey,\n            radiusKey: this.radiusKey\n        });\n    };\n    PieSeries.prototype.getTooltipHtml = function (nodeDatum) {\n        var angleKey = this.angleKey;\n        if (!angleKey) {\n            return '';\n        }\n        var _a = this, fills = _a.fills, tooltip = _a.tooltip, angleName = _a.angleName, radiusKey = _a.radiusKey, radiusName = _a.radiusName, labelKey = _a.labelKey, labelName = _a.labelName;\n        var tooltipRenderer = tooltip.renderer;\n        var color = fills[nodeDatum.index % fills.length];\n        var datum = nodeDatum.seriesDatum;\n        var label = labelKey ? datum[labelKey] + \": \" : '';\n        var angleValue = datum[angleKey];\n        var formattedAngleValue = typeof angleValue === 'number' ? toFixed(angleValue) : angleValue.toString();\n        var title = this.title ? this.title.text : undefined;\n        var content = label + formattedAngleValue;\n        var defaults = {\n            title: title,\n            backgroundColor: color,\n            content: content\n        };\n        if (tooltipRenderer) {\n            return toTooltipHtml(tooltipRenderer({\n                datum: datum,\n                angleKey: angleKey,\n                angleValue: angleValue,\n                angleName: angleName,\n                radiusKey: radiusKey,\n                radiusValue: radiusKey ? datum[radiusKey] : undefined,\n                radiusName: radiusName,\n                labelKey: labelKey,\n                labelName: labelName,\n                title: title,\n                color: color,\n            }), defaults);\n        }\n        return toTooltipHtml(defaults);\n    };\n    PieSeries.prototype.listSeriesItems = function (legendData) {\n        var _this = this;\n        var _a = this, labelKey = _a.labelKey, data = _a.data;\n        if (data && data.length && labelKey) {\n            var _b = this, fills_1 = _b.fills, strokes_1 = _b.strokes, id_1 = _b.id;\n            var titleText_1 = this.title && this.title.showInLegend && this.title.text;\n            data.forEach(function (datum, index) {\n                var labelParts = [];\n                titleText_1 && labelParts.push(titleText_1);\n                labelParts.push(String(datum[labelKey]));\n                legendData.push({\n                    id: id_1,\n                    itemId: index,\n                    enabled: _this.seriesItemEnabled[index],\n                    label: {\n                        text: labelParts.join(' - ')\n                    },\n                    marker: {\n                        fill: fills_1[index % fills_1.length],\n                        stroke: strokes_1[index % strokes_1.length],\n                        fillOpacity: _this.fillOpacity,\n                        strokeOpacity: _this.strokeOpacity\n                    }\n                });\n            });\n        }\n    };\n    PieSeries.prototype.toggleSeriesItem = function (itemId, enabled) {\n        this.seriesItemEnabled[itemId] = enabled;\n        this.scheduleData();\n    };\n    PieSeries.className = 'PieSeries';\n    PieSeries.type = 'pie';\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"angleKey\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"angleName\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"radiusKey\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"radiusName\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"radiusMin\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"radiusMax\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"labelKey\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"labelName\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"fillOpacity\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"strokeOpacity\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"lineDash\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"lineDashOffset\", void 0);\n    __decorate([\n        reactive('update')\n    ], PieSeries.prototype, \"formatter\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"rotation\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"outerRadiusOffset\", void 0);\n    __decorate([\n        reactive('dataChange')\n    ], PieSeries.prototype, \"innerRadiusOffset\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"strokeWidth\", void 0);\n    __decorate([\n        reactive('layoutChange')\n    ], PieSeries.prototype, \"shadow\", void 0);\n    return PieSeries;\n}(PolarSeries));\nexport { PieSeries };\n"]},"metadata":{},"sourceType":"module"}